<!doctype html>
<html lang="ka">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ზუკა — MiniGPT</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#3b82f6;--me:#111827;--you:#0b1220}
    html,body{height:100%;margin:0;font-family:Inter, Roboto, system-ui, -apple-system, "Segoe UI", Arial;color:#e6eef8;background:linear-gradient(180deg,#071127 0%, #071430 100%)}
    .app{max-width:900px;margin:32px auto;padding:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;box-shadow:0 6px 30px rgba(2,6,23,0.6)}
    header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    header h1{font-size:18px;margin:0}
    .chat-area{height:420px;overflow:auto;padding:16px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
    .msg{display:flex;margin-bottom:12px}
    .msg.me{justify-content:flex-end}
    .bubble{max-width:72%;padding:10px 14px;border-radius:14px;line-height:1.3}
    .bubble.me{background:linear-gradient(90deg,#1f2937,#111827);color:#fff;border-bottom-right-radius:4px}
    .bubble.bot{background:rgba(59,130,246,0.12);color:#dbeafe;border-bottom-left-radius:4px}
    .meta{font-size:11px;opacity:0.7;margin-top:6px}
    .controls{display:flex;gap:8px;align-items:center;margin-top:12px}
    input[type=text]{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#e6eef8}
    button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:white;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06)}
    .small{font-size:12px;color:#9fb0d9}
    footer{margin-top:10px;display:flex;justify-content:space-between;align-items:center}
    @media (max-width:600px){.app{margin:12px;padding:12px}.chat-area{height:320px}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='36' height='36'><rect rx='8' width='36' height='36' fill='%233b82f6'/><text x='50%' y='55%' font-size='18' font-family='Arial' fill='white' text-anchor='middle'>M</text></svg>" alt="logo" style="width:36px;height:36px;border-radius:8px;">
      <div>
        <h1>ზუკა — MiniGPT</h1>
        <div class="small">პროგრამული, წესებზე დაფუძნებული ChatGPT-კლონი (ავტონომიური, არცერთი ქსელის გარეშე)</div>
      </div>
    </header>

    <main>
      <div id="chat" class="chat-area" aria-live="polite"></div>

      <div class="controls">
        <input id="input" type="text" placeholder="დაწერეთ რამე... (დააჭირეთ Enter-ონს ან Send)" autocomplete="off"/>
        <button id="send">Send</button>
        <button id="clear" class="ghost">Clear</button>
      </div>

      <footer>
        <div class="small">სარჩევი: სიტყვის ნაწილი არის case-insensitive.</div>
        <div class="small">Responds: გამარჯობა, ჯამი, როგორი ხარ, დრო, help</div>
      </footer>
    </main>
  </div>

  <script>
    // MiniGPT — მარტივი წესებზე მომუშავე კლონი
    class MiniGPT {
      constructor(name = 'MiniGPT'){
        this.name = name;
      }

      respond(message){
        const m = message.trim().toLowerCase();
        // რამდენიმე კანონიკური წესია — შეგიძლია დაამატო მეტი
        if(!m) return "მოხარული ვიქნები როცა რამეს დაწერ!";
        if(m.includes('გამარჯობა') || m.includes('გამ')) return 'გამარჯობა! 😊 რაში დაგეხმარო?';
        if(m.includes('მოდის') && m.includes('როცა')) return 'უკვე აქ არის — მე მპასუხობ ახლა 😉';
        if(m.match(/(ჯამ|სულ)/)){
          // ცდის თუ არის რიცხვები შეტყობინებაში — გამოიკრიბება და დააბრუნებს ჯამს
          const nums = message.match(/-?\d+/g);
          if(nums && nums.length) {
            const sum = nums.map(Number).reduce((a,b)=>a+b,0);
            return `მე დავთვალე: ${sum}`;
          }
          return 'თუ გსურდა რიცხვების ჯამი, ჩასვი რიცხვები შეტყობინებაში.';
        }
        if(m.includes('როგორ') || m.includes('როგორი')) return 'შენმა პატარა ძმამ კარგად არის — ყოველთვის მზად დაგეხმარო! 😄';
        if(m.includes('help') || m.includes('დახმარება')) return 'შეგიძლია გვკითხო: გამარჯობა, გამოთვალე ჯამი (ჩატარე რიცხვები), ან ასევე კითხო ვინ ხარ.';
        if(m.includes('ვინ') && m.includes('ხარ')) return `მე ვარ "${this.name}" — პატარა წესებზე დაფუძნებული კლონი.`;

        // თუ ვერ გაიგო — ვცდილობთ გამოყენებითი პასუხი ვუპატიჟოთ
        // მარტივი შემთხვევითი ფრაზები
        const fallbacks = [
          'ეს საინტერესოა — გაიმეორე სხვა სიტყვებით?',
          'მიზეზით ვერ გავიგე — შეგიძლია უფრო დეტალურად განმარტო?',
          'ვცდილობ ვიპოვნო პასუხს, მაგრამ მგონი მეტი კონტექსტი მჭირდება.'
        ];
        return fallbacks[Math.floor(Math.random()*fallbacks.length)];
      }
    }

    // UI logic
    const bot = new MiniGPT('ჩემი პატარა ძმა');
    const chat = document.getElementById('chat');
    const input = document.getElementById('input');
    const sendBtn = document.getElementById('send');
    const clearBtn = document.getElementById('clear');

    function appendMessage(text, who='bot'){
      const wrap = document.createElement('div');
      wrap.className = 'msg ' + (who==='me'? 'me':'');
      const bubble = document.createElement('div');
      bubble.className = 'bubble ' + (who==='me'? 'me':'bot');
      bubble.textContent = text;
      wrap.appendChild(bubble);
      chat.appendChild(wrap);
      chat.scrollTop = chat.scrollHeight - chat.clientHeight + 100;
    }

    function send(){
      const text = input.value.trim();
      if(!text) return;
      appendMessage(text, 'me');
      input.value = '';
      // emulate thinking delay
      setTimeout(()=>{
        const reply = bot.respond(text);
        appendMessage(reply, 'bot');
      }, 350 + Math.random()*450);
    }

    sendBtn.addEventListener('click', send);
    clearBtn.addEventListener('click', ()=>{chat.innerHTML=''; appendMessage('ზდაროვაა ზუკაა — MiniGPT. დაწერე რამე ქვემოთ.','bot')});
    input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ e.preventDefault(); send(); } });

    // პირველი შეტყობინება
    appendMessage('ზდაროვა ზუკაა — MiniGPT. დაწერე რამე ქვემოთ.','bot');
  </script>
</body>
</html>
